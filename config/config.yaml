name: right

dynamixel:
  # USB port name given by the command: ls /dev/serial/by-id/
  dynamixel_port: "usb-FTDI_USB__-__Serial_Converter_FTAA0AKR-if00-port0"
  # Servo types
  servo_types:
    [
      "XC330_T288_T",
      "XM430_W210_T",
      "XC330_T288_T",
      "XM430_W210_T",
      "XC330_T288_T",
      "XC330_T288_T",
      "XC330_T288_T",
      "XC330_T288_T",
    ]
  # Servo joint directions to match that of the leader arm
  joint_signs: [1, 1, 1, -1, 1, 1, 1, -1]

arm_teleop:
  # URDF used for creating leader arm dynamics model to compute gravity compensation
  leader_urdf: "factr_teleop_franka.urdf"
  num_arm_joints: 7
  arm_joint_limits_max:
    [1.8973, 1.7628, 2.8973, -0.8698, 2.8973, 3.7525, 2.8973]
  arm_joint_limits_min:
    [-1.8973, -1.7628, -2.8973, -3.0718, -2.8973, -0.0175, -2.8973]
  arm_joint_limits_safety_margin: 0.1
  initialization:
    # The expected leader arm joint position before launching the script
    calibration_joint_pos: [0.0, -1.52, 0.0, -3.14, 0.0, 1.52, 1.57]
    # The leader arm must be brought to this joint position before the follower starts mirroring the leader

    initial_match_joint_pos: [0.0, -1.52, 0.0, -3.14, 0.0, 1.52, 1.57]
    # initial_match_joint_pos: [0., -2.9575, 0., -1.5923, -0., 1.5616, 1.6536]

gripper_teleop:
  # The maximum range (in rad) of the leader gripper trigger
  actuation_range: 0.8

controller:
  frequency: 500
  global_torque_limit: 0.8
  exponential_smoothing:
    # Enable exponential smoothing of control torques
    # Smoothing formula: smoothed = alpha * current + (1 - alpha) * previous
    # alpha = 1.0 means no smoothing (use current value directly)
    # alpha = 0.0 means full smoothing (use only previous value)
    # Typical values: 0.1 - 0.5 for moderate smoothing
    enable: True
    alpha: 0.1
  torque_feedback:
    enable: True
    gain: 2.4
    damping: 0.3
    motor_scalar: 94.5652173913
  gravity_comp:
    enable: True
    gain: 0.3
  null_space_regulation:
    null_space_joint_target: [0.0, -0.7854, 0.0, -2.356, 0.0, 1.57, 0.0, 0.0]
    # kp: 0.0
    kp: 0.1
    # kd: 0.0
    kd: 0.01
  static_friction_comp:
    enable_speed: 0.9
    gain: 1.0
  joint_limit_barrier:
    kp: 0.0
    # kp: 1.03561658022
    kd: 0.0
    # kd: 0.04315069084
  joint_position_control:
    interpolation_step_size: 0.5
    kp: 0.2
    # kp: 1.03561658022
    kd: 0.04
    # kd: 0.04315069084

  gripper_feedback:
    enable: True
    gain: 0.28328611898
    ema_beta: 0.95
    spring_constant: 0.06
    spring_displacement_offset: 1.0

mujoco:
  # MuJoCo simulation settings for follower Franka FR3 arm
  sim_timestep: 0.002 # 500 Hz to match controller frequency
  # Torque control gains for position tracking
  position_control:
    kp: [1000.0, 1000.0, 1000.0, 1000.0, 300.0, 300.0, 300.0] # Joint stiffness
    kd: [50.0, 50.0, 50.0, 50.0, 15.0, 15.0, 15.0] # Joint damping
